# Story 6.1: Implement Project Entity

**Status:** ToDo

**Epic:** 6.0 Agent Workflow & Model Enhancements

**Story:**

**As a** System,
**I want** to introduce a top-level `Project` entity that contains all associated Epics, Stories, and Documents,
**so that** all project artifacts are organized under a single, queryable root.

**Acceptance Criteria:**

1. A `Project` data model is created with attributes for `id`, `name`, and `description`.
2. Existing `Epic` models are updated to include a foreign key relationship to a `Project`.
3. A `projects.create` tool is created to initialize a new project.
4. A `projects.find` tool is created to list all existing projects.

**Tasks / Subtasks:**

- [ ] **Create Project Data Model** (AC: 1)
  - [ ] Create `Project` model in `src/agile_mcp/models/project.py`
  - [ ] Add SQLAlchemy mapping with id (primary key), name, description fields
  - [ ] Add validation for required fields (name cannot be empty)
  - [ ] Add to_dict() method for JSON serialization
  - [ ] Create ProjectResponse Pydantic model in response.py

- [ ] **Update Epic Model with Project Relationship** (AC: 2)
  - [ ] Add `project_id` foreign key field to Epic model
  - [ ] Add relationship property to access parent project
  - [ ] Update Epic model validation to ensure project_id exists
  - [ ] Create database migration to add project_id column to epics table
  - [ ] Update EpicResponse model to include project information

- [ ] **Create Project Management Tools** (AC: 3, 4)
  - [ ] Create `projects.create` tool in new project_tools.py
  - [ ] Create `projects.find` tool to list all projects
  - [ ] Add proper validation and error handling
  - [ ] Create ProjectService for business logic
  - [ ] Create ProjectRepository for data access

- [ ] **Create Unit Tests for Project Functionality**
  - [ ] Test Project model validation and serialization
  - [ ] Test Project-Epic relationship functionality
  - [ ] Test project management tools
  - [ ] Test database operations and migrations

- [ ] **Integration Tests and Database Migration**
  - [ ] Update database schema creation scripts
  - [ ] Test project-epic relationship queries
  - [ ] Verify backward compatibility for existing epics
  - [ ] Test project listing and creation workflows

**Dev Notes:**

**Context from PRD:**
This story implements the foundational project-centric data model described in Epic 6 PRD. It establishes the hierarchical relationship: Project -> Epic -> Story, enabling better organization and context management for agent workflows.

**Technical Implementation:**
- Follow established patterns from Epic and Story models
- Use SQLAlchemy relationships for Project-Epic association
- Maintain backward compatibility for existing Epic data
- Create comprehensive validation and error handling

**Dependencies:**
- Core data model changes that affect Epic model
- Database migration strategy for existing data
- Foundation for Document model (next story)

**Change Log:**

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-07-31 | 1.0 | Created missing Project Entity story from PRD | John (PM) |
